@page
@model CinemaWebClient.Pages.Film.DetailModel
@{
}
<div class="row">
	<div class="col-md-4">
		<img class="w-100" style="height:fit-content" src="http://localhost:5001/images/@Model.Film.Image" />
	</div>
	<div class="col-md-8">
		<h4>@Model.Film.Title</h4>
		<dl class="row">
			<dt class="col-sm-2">
				Description
			</dt>
			<dd class="col-sm-10">
				@Model.Film.Description
			</dd>
			<dt class="col-sm-2">
				Genre
			</dt>
			<dd class="col-sm-10">
				@Model.Film.Genre.GenreName
			</dd>
			<dt class="col-sm-2">
				Duration
			</dt>
			<dd class="col-sm-10">
				@(Model.Film.FilmDuration) Minutes
			</dd>
			<dt class="col-sm-2">
				Release Date
			</dt>
			<dd class="col-sm-10">
				@(Model.Film.DateRelease?.ToString("dd/MM/yyyy") ?? "")
			</dd>
		</dl>
	</div>
	<hr class="dropdown-divider" />
	@if (Model.Film.Shows.Count > 0)
	{
		@foreach (var item in Model.Film.Shows)
		{
			<div class="d-flex">
				<a class="btn">
					<div>@item.ShowDate.ToString("dd/MM/yyyy hh:mm tt")</div>
					@{
						long remainSeats = 0;
						if (item.SeatStatus != new string('1', item.SeatStatus.Length))
						{
							remainSeats = item.SeatStatus.Count(x => x == '0');
						}
					}
					<div>Remain: @(remainSeats) Seats</div>
				</a>
			</div>
		}
	}
</div>

@*<div class="container">
    <h3 class="margin-bottom-20">Home &gt; <span style="color:#03599D" id="filmTitleNavigation"></span></h3>
    <div class="row">
        <div class="col-md-4">
            <div class="pi-img-wrapper" id="filmImage"></div>
        </div>
        <div class="col-md-8">
            <h1 class="bold no-margin margin-bottom-15" id="filmTitle"></h1>
            <div class="margin-bottom-15 font-lg font-family-san text-justify" id="filmDescription"></div>
        </div>
    </div>
    <div class="row">
        <!-- TABS -->
        <div class="col-md-16 tab-style-1 margin-bottom-35">

            <br>
            <div class="fb-like hidden-xs fb_iframe_widget" data-href="https://www.betacinemas.vn/chi-tiet-phim.htm?gf=6c5e7438-6144-45f7-8c73-3660d9b30d20" data-layout="standard" data-action="like" data-size="small" data-show-faces="true" data-share="true" fb-xfbml-state="rendered" fb-iframe-plugin-query="action=like&amp;app_id=367174740769877&amp;container_width=1120&amp;href=https%3A%2F%2Fwww.betacinemas.vn%2Fchi-tiet-phim.htm%3Fgf%3D6c5e7438-6144-45f7-8c73-3660d9b30d20&amp;layout=standard&amp;locale=vi_VN&amp;sdk=joey&amp;share=true&amp;show_faces=true&amp;size=small"><span style="vertical-align: bottom; width: 450px; height: 28px;"><iframe name="f23d706d7f3ccc8" width="1000px" height="1000px" data-testid="fb:like Facebook Social Plugin" title="fb:like Facebook Social Plugin" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" allow="encrypted-media" src="https://www.facebook.com/v3.2/plugins/like.php?action=like&amp;app_id=367174740769877&amp;channel=https%3A%2F%2Fstaticxx.facebook.com%2Fx%2Fconnect%2Fxd_arbiter%2F%3Fversion%3D46%23cb%3Df3ba27f728c211c%26domain%3Dwww.betacinemas.vn%26is_canvas%3Dfalse%26origin%3Dhttps%253A%252F%252Fwww.betacinemas.vn%252Ff18626432805f5c%26relation%3Dparent.parent&amp;container_width=1120&amp;href=https%3A%2F%2Fwww.betacinemas.vn%2Fchi-tiet-phim.htm%3Fgf%3D6c5e7438-6144-45f7-8c73-3660d9b30d20&amp;layout=standard&amp;locale=vi_VN&amp;sdk=joey&amp;share=true&amp;show_faces=true&amp;size=small" style="border: none; visibility: visible; width: 450px; height: 28px;" class=""></iframe></span></div>
        </div>
        <!-- END TABS -->
    </div>
</div>


<script src="~/lib/bootstrap//dist/js/bootstrap.bundle.min.js"></script>
<script src="~/js/scripts.js"></script>
<script src="~/lib/jquery/dist/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
<link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />

<script>
    $(document).ready(function () {
        const urlParams = new URLSearchParams(window.location.search);
        const id = urlParams.get('id');
        var api = "http://localhost:5001/api/Films?$filter=FilmId eq " + id;
        LoadData(api);
    });
    function LoadData(link) {
        $.ajax({
            url: link,
            type: 'GET',
            data: {
            },
            success: (data) => {

                var title = `${data[0].title}`;
                var image = `<img class="img-responsive border-radius-20" style="width: 100%" alt="" src="http://localhost:5001/api/Images/${data[0].image}">`
                var description = `${data[0].description}`

                document.querySelector("#filmTitleNavigation").innerHTML = title;
                document.querySelector("#filmImage").innerHTML = image;
                document.querySelector("#filmTitle").innerHTML = title;
                document.querySelector("#filmDescription").innerHTML = description;
            },
            error: (err) => {
                NotificationMessageError("Server not respone!");
            }
        });
    }
</script>


<style>
    .pi-img-wrapper{
        position: relative;
    }

    .border-radius-20{
        border-radius: 20px !important;
    }

    .margin-bottom-15{
        margin-bottom: 15px !important;
    }

    .bold {
        font-weight: 700 !important;
    }

    .margin-bottom-20{
        margin-bottom:20px;
    }
</style>*@
